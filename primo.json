{"site":{"id":"13b918f9-a24f-4be7-a0ca-2103b1084ab1","name":"Testing","url":"testing","code":{"js":"","css":"\n@import url(\"https://unpkg.com/@primo-app/primo@1.3.64/reset.css\");\n\n#page {\n  font-family: system-ui, sans-serif;\n  color: var(--color);\n  line-height: 1.6; \n  font-size: 1rem;\n  background: var(--background);\n}\n\n.section-container {\n  max-width: var(--max-width, 1000px);\n  margin: 0 auto;\n  padding: 3rem var(--padding, 1rem); \n}\n\n.heading {\n  font-size: 3rem;\n  line-height: 1;\n  font-weight: 700;\n  margin: 0;\n}\n\n.button {\n  color: white;\n  background: var(--color-accent);\n  border-radius: 5px;\n  padding: 8px 20px;\n  transition: var(--transition);\n\n  &:hover {\n    box-shadow: 0 0 10px 5px rgba(0, 0, 0, 0.1);\n  } \n\n  &.inverted {\n    background: transparent; \n    color: var(--color-accent); \n    border: 2px solid var(--color-accent);\n  }\n}\n","html":{"head":"<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> ","below":""}},"fields":[],"content":{"en":{}}},"pages":[{"id":"a6791364-ef2a-40de-ad91-249e7c354ba9","url":"index","name":"Home","code":{"js":"","css":"","html":{"head":"","below":""}},"fields":[],"content":{"en":{}},"site":"13b918f9-a24f-4be7-a0ca-2103b1084ab1","parent":null}],"sections":[{"id":"d4fc8a04-c9e7-42dd-84e6-603734cb9a27","content":{},"page":"a6791364-ef2a-40de-ad91-249e7c354ba9","symbol":"f4221310-a9a1-458a-b82e-81755dc35ec3","index":0}],"symbols":[{"id":"f4221310-a9a1-458a-b82e-81755dc35ec3","name":"News","code":{"js":"import Icon from '@iconify/svelte'\nlet activePage = 0\n</script>\n<script context=\"module\">\nconsole.log('RUNNING')\nlet truncate = (content, maxLength = 255, append = 'â€¦') => {\n    let container = document.createElement('div')\n    container.innerHTML = content\n    let limitReached = false\n    let counted = 0\n    let nodeHandler = node => {\n        if (limitReached) {\n            node.remove()\n            return\n        }\n        let childNodes = Array.from(node.childNodes);\n        if (childNodes.length) {\n            childNodes.forEach(childNode => nodeHandler(childNode) )\n        } else {\n            counted += node.textContent.length\n            if (counted >= maxLength) {\n                limitReached = true\n                if (counted > maxLength) {\n                    node.textContent = node.textContent.slice(0, -(counted - maxLength))\n                }\n\n                node.textContent += append\n            }\n        }\n    };\n    nodeHandler(container)\n    return container.innerHTML\n}\nconst fetchPosts = async () => {\n  const apiUrl = 'http://localhost:5173/api';\n  const response = await fetch(apiUrl + '/test-api/blog'); \n  const json = await response.json();\n  // console.log({json})\n  let posts = json.page._meta.subpages;\n  let blog = [];\n  posts.sort((a, b) => new Date(b.created_at) - new Date(a.created_at)); // DESC\n\n  while (posts.length > 0) {\n    blog.push(posts.splice(0, 5));\n  }\n\n  for (let page of blog) {\n    for (let j = 0; j < page.length; j++) {\n      const post = page[j];\n      const res2 = await fetch(apiUrl + `/site_name/blog/${post.url}`);\n      const json2 = await res2.json();\n\n      page[j] = {\n        url: '', // '/blog/' + post.url,\n        title: 'Title', // json2.sections[2].title,\n        date: '01/24/24', // json2.sections[2].date,\n        img: 'https://images.unsplash.com/photo-1705852592864-1a31a6c9260a?q=80&w=2832&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D', // json2.sections[3].image.url,\n        html: '<h1>something</h1>' // truncate(json2.sections[3].content.html, 450),\n      };\n    }\n  }\n  return blog;\n};\n\nconst blog = await fetchPosts().catch(error => console.error('Error fetching posts:', error));\n ","css":"article {\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n  overflow-x: hidden;\n  overflow-y: visible;\n  > div {\n    display: grid;\n    position: relative;\n    gap: 1.5rem;\n    &:nth-child(2) {\n      order: -1;\n    }\n    h5 {\n      margin: -1rem 0;\n      color: var(--accent);\n      display: flex;\n      font-size: 1rem;\n      gap: 0.5rem;\n      align-items: center;\n    }\n    p {\n      text-align: justify;\n    }\n    a {\n      justify-self: center;\n      align-self: center;\n    }\n  }\n  img {\n    width: 100%;\n    height: auto;\n    padding: 2rem;\n    border-radius: 40px;\n  }\n  & + article {\n    margin-top: 3rem;\n  }\n}\n\n.barrels {\n  position: absolute;\n  color: var(--accent);\n  z-index:-1;\n  width: 100%;\n  height: 100%;\n  opacity: 0.3;\n  span {\n    position: absolute;\n    animation: cube 6s ease-in-out infinite;\n    top: 25%;\n    left: -10%;\n    animation-delay: var(--d);\n    &:nth-child(2) {\n      top: -5%;\n      right: 15%;\n      left: auto;\n    }\n    &:nth-child(3) {\n      top: auto;\n      bottom: 30%;\n      right: -35%;\n      left: auto;\n    }\n  }\n}\n\n@keyframes cube {\n    50% {\n        transform: translateY(1rem)\n    }\n}\n\n@media all and (min-width: 900px) {\n article {\n   flex-direction: row;\n   &:nth-child(even) {\n     flex-direction: row-reverse;\n   }\n   > div {\n    width: calc(50% - 1rem);\n   }\n   img {\n     padding: 0;\n     border-radius: 10px;\n   }\n }\n}\n\n@media all and (min-width: 1300px) {\n article {\n   overflow-x: visible;\n }\n}","html":"<div class=\"wrapper\">\n  <div class=\"section-container\">\n    {#each blog as page, i}\n      <div class=\"page\" class:active={i === activePage}>\n        {#each page as {url, title, date, img, html}}\n        <article aria-labelledby={title}>\n          <div>\n            <h2>{title}</h2>\n            <h5><Icon height=\"20\" icon=\"material-symbols-light:calendar-month-rounded\" /> {date}</h5>\n            {@html html}\n            <a class=\"button inverted\" href={url} aria-label=\"Read more about {title}\"><span>Read more</span></a>\n          </div>\n          <div>\n            <img src={img} alt={title} loading=\"lazy\">\n            <div class=\"barrels\">\n              {#each [1,2,3] as i}\n                <span style=\"--d:{(Math.random() * 2) - 1}s\">\n                  <Icon height=\"60\" icon=\"ic:baseline-oil-barrel\" />\n                </span>\n              {/each}\n            </div>\n          </div>\n        </article>\n        {/each}\n      </div>\n    {/each}\n    {#if blog.length > 1}\n    <div class=\"pagination\">\n    {#each blog as _, i}\n    <button class=\"button\" class:inverted={i === activePage} disabled={i === activePage} on:click={activePage = i}>{i+1}</button>\n    {/each}\n    </div>\n    {/if}\n  </div>\n</div>"},"fields":[],"content":{"en":{}},"site":"13b918f9-a24f-4be7-a0ca-2103b1084ab1"},{"id":"20a797f3-f537-4ab0-b28a-5166c30ad630","name":"Site Navigation","code":{"js":"import {fade} from 'svelte/transition'\nimport Icon from '@iconify/svelte'\n\nlet mobileNavOpen = false \n\nfunction toggleMobileNav() {\n  mobileNavOpen = !mobileNavOpen\n}\n","css":".section-container {\n  /* Defined in Site CSS */\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-top: 1rem;\n  padding-bottom: 1rem;\n}\n\n.logo {\n  font-size: 1.5rem;\n  font-weight: 600;\n  line-height: 1.2;\n}\n\n.desktop-nav {\n  display: none;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n\n  nav {\n    display: flex;\n    gap: 2rem;\n\n    a.link {\n      /* Defined in Site CSS */\n      border-color: transparent;\n      transition: border-color 0.1s;\n      font-size: 0.95rem;\n\n      &:hover {\n        border-color: initial;\n      }\n    }\n  }\n\n  @media (min-width: 800px) {\n    display: flex;\n  }\n}\n\n.mobile-nav {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  font-weight: 500;\n\n  @media (min-width: 800px) {\n    display: none;\n  }\n}\n\n/* Mobile navigation popup */\n#popup {\n  font-size: 1.25rem;\n  display: grid;\n  gap: 1rem;\n  position: absolute;\n  text-align: center;\n  background-color: var(--background-color, white);\n  box-shadow: var(--box-shadow, 0px 4px 30px rgba(0, 0, 0, 0.1));\n  border-radius: var(--border-radius);\n  inset: 0.5rem;\n  bottom: initial;\n  padding: 2rem;\n  z-index: 1;\n\n  button#close {\n    position: absolute;\n    right: 1rem;\n    top: 1rem;\n  }\n}\n","html":"<header class=\"section-container\">\n  <div class=\"desktop-nav\">\n    <a href=\"/\" class=\"logo\">\n      {#if logo.title}\n        {logo.title}\n      {:else if logo.image.url}\n        <img src={logo.image.url} alt={logo.image.alt} />\n      {/if}\n    </a>\n    <nav>\n      {#each site_nav as { link }}\n        <a class=\"link\" href={link.url}>{link.label}</a>\n      {/each}\n    </nav>\n  </div>\n  <div class=\"mobile-nav\">\n    <a href=\"/\" class=\"logo\">\n      {#if logo.title}\n        {logo.title}\n      {:else if logo.image.url}\n        <img src={logo.image.url} alt={logo.image.alt} />\n      {/if}\n    </a>\n    <button\n      id=\"open\"\n      on:click={() => (mobileNavOpen = true)}\n      aria-label=\"Open mobile navigation\">\n      <Icon height=\"30\" icon=\"eva:menu-outline\" />\n    </button>\n    {#if mobileNavOpen}\n      <nav id=\"popup\" transition:fade={{ duration: 200 }}>\n        {#each site_nav as { link }}\n          <a href={link.url}>{link.label}</a>\n        {/each}\n        <button\n          on:click={() => (mobileNavOpen = false)}\n          id=\"close\"\n          aria-label=\"Close Navigation\">\n          <Icon height=\"25\" icon=\"bi:x-lg\" />\n        </button>\n      </nav>\n    {/if}\n  </div>\n</header>"},"fields":[{"id":"bjnyu","key":"logo","type":"group","label":"Logo","value":{"image":{"alt":"","src":"https://jbbjtodsvhsgjappwopg.supabase.co/storage/v1/object/public/sites/public-library/assets/logoipsum-261 (1).svg","url":"https://jbbjtodsvhsgjappwopg.supabase.co/storage/v1/object/public/sites/public-library/assets/logoipsum-261 (1).svg","size":3},"title":"Logo"},"fields":[{"id":"hehwn","key":"title","type":"text","label":"Title","fields":[],"options":{},"is_static":false},{"id":"ueztm","key":"image","type":"image","label":"Image","fields":[],"options":{},"is_static":false}],"options":{},"is_static":true},{"id":"qazio","key":"site_nav","type":"repeater","label":"Site Navigation","value":[{"link":{"url":"","label":"Home","active":false}},{"link":{"url":"/","label":"About"}},{"link":{"url":"/","label":"Contact"}}],"fields":[{"id":"onbxk","key":"link","type":"link","label":"Link","fields":[],"options":{},"is_static":false}],"options":{},"is_static":true}],"content":{"en":{"logo":{"image":{"alt":"","src":"https://jbbjtodsvhsgjappwopg.supabase.co/storage/v1/object/public/sites/public-library/assets/logoipsum-261 (1).svg","url":"https://jbbjtodsvhsgjappwopg.supabase.co/storage/v1/object/public/sites/public-library/assets/logoipsum-261 (1).svg","size":3},"title":"Logo"},"site_nav":[{"link":{"url":"","label":"Home","active":false}},{"link":{"url":"/","label":"About"}},{"link":{"url":"/","label":"Contact"}}]}},"site":"13b918f9-a24f-4be7-a0ca-2103b1084ab1"},{"id":"f6c2ee52-93ea-4138-89cd-7e90b4b0f921","name":"Content","code":{"js":"","css":".content {\n  :global(img) {\n    width: 100%;\n    margin: 2rem 0;\n    box-shadow: var(--box-shadow);\n    border-radius: var(--border-radius);\n  }\n\n  :global(p) {\n    padding: 0.5rem 0;\n    line-height: 1.5;\n  }\n\n  :global(a) {\n    text-decoration: underline;\n  }\n\n  :global(h1) {\n    font-size: 2.5rem;\n    font-weight: 600;\n    line-height: 1.2;\n    margin-bottom: 0.5rem;\n  }\n\n  :global(h2) {\n    font-size: 2rem;\n    font-weight: 600;\n    margin-bottom: 0.25rem;\n    line-height: 1.2;\n  }\n\n  :global(h3) {\n    font-size: 1.5rem;\n    font-weight: 600;\n    line-height: 1.2;\n    margin-top: .5rem;\n  }\n\n  :global(ul) {\n    list-style: disc;\n    padding: 0.5rem 0;\n    padding-left: 1.25rem;\n  }\n\n  :global(ol) {\n    list-style: decimal;\n    padding: 0.5rem 0;\n    padding-left: 1.25rem;\n  }\n\n  :global(blockquote) {\n    padding: 2rem;\n    box-shadow: var(--box-shadow);\n    border-radius: var(--border-radius);\n  }\n}\n","html":"<div class=\"section\">\n  <div class=\"section-container content\">{@html content.html}</div>\n</div>\n"},"fields":[{"id":"wqxfg","key":"content","type":"markdown","label":"Content","fields":[],"options":{},"is_static":false}],"content":{"en":{"content":{"html":"<h1>Heading 1</h1><p>Welcome, feel free to delete these blocks and create your own by clicking the \"+\" button in the side panel. Click the code button in the corner of this block to change its styling.</p><h2>Heading 2</h2><p>A simple paragraph. You can use markdown in this block. <strong>Duis aute</strong> irure dolor in reprehenderit in voluptate velit esse cillum dolore <em>eu fugiat</em> nulla pariatur. Excepteur sint <strong>occaecat cupidatat</strong> non proident, sunt in culpa qui officia <a target=\"_blank\" rel=\"noopener noreferrer nofollow\" class=\"link link link link link\" href=\"/\">deserunt mollit</a> anim id est laborum.</p><h3>Heading 3</h3><p>Enjoy :)</p>","markdown":"# Heading 1\n\nWelcome, feel free to delete these blocks and create your own by clicking the \"+\" button in the side panel. Click the code button in the corner of this block to change its styling.\n\n## Heading 2\n\nA simple paragraph. You can use markdown in this block. **Duis aute** irure dolor in reprehenderit in voluptate velit esse cillum dolore *eu fugiat* nulla pariatur. Excepteur sint **occaecat cupidatat** non proident, sunt in culpa qui officia [deserunt mollit](</>) anim id est laborum.\n\n### Heading 3\n\n"}}},"site":"13b918f9-a24f-4be7-a0ca-2103b1084ab1"},{"id":"0a598260-0b6f-4309-ad81-0fe09e14d0ca","name":"Site Footer","code":{"js":"import Icon from '@iconify/svelte';","css":".section-container { /* Defined in Site CSS */\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n  align-items: center;\n  gap: 1rem;\n  padding-top: 1rem;\n  padding-bottom: 1rem;\n  \n  @media (min-width: 600px) {\n    flex-direction: row;\n  }\n}\n\nnav {\n  display: flex;\n  gap: 1rem;\n  font-size:.875rem;\n\n  .link { /* Defined in Site CSS */\n    border-color: transparent;\n\n    &:hover {\n      border-color: initial;\n    }\n  }\n}\n\n.primo {\n  font-weight: 600;\n  font-size: 0.75rem;\n  \n  a {\n    text-decoration: underline; \n  }\n}\n\n.social-links {\n  display: flex;\n  gap: 1.5rem;\n  font-size: 1.5rem;\n\n  a {\n    color: var(--color-accent, rebeccapurple);\n    transition: var(--transition, 0.1s transform);\n\n    &:hover {\n      transform: scale(1.1);\n    }\n  }\n}\n","html":"<footer class=\"section-container\">\n  <nav>\n    {#each nav as { link }}\n      <a class=\"link\" href={link.url}>{link.label}</a>\n    {/each}\n  </nav>\n  <span class=\"primo\"> <a href=\"https://primo.so\">Primo</a> Powered </span>\n  <div class=\"social-links\">\n    {#each social as { link, icon }}\n      <a href={link.url} aria-label={link.label}>\n        <Icon {icon} />\n      </a>\n    {/each}\n  </div>\n</footer>"},"fields":[{"id":"pwkca","key":"nav","type":"repeater","label":"Site Navigation","value":[{"link":{"url":"https://primosites.vercel.app/theme-minimal","label":"Copyright 2023"}}],"fields":[{"id":"fayrx","key":"link","type":"link","label":"Link","fields":[],"options":{},"is_static":false}],"options":{},"is_static":true},{"id":"agfry","key":"social","type":"repeater","label":"Social Items","value":[{"icon":"mdi:twitter","link":{"url":"/","label":"Twitter"}},{"icon":"mdi:linkedin","link":{"url":"/","label":"Linkedin"}}],"fields":[{"id":"nxhuf","key":"link","type":"link","label":"Link","fields":[],"options":{},"is_static":false},{"id":"xcsnn","key":"icon","type":"text","label":"Icon","fields":[],"options":{},"is_static":false}],"options":{},"is_static":true}],"content":{"en":{"nav":[{"link":{"url":"https://primosites.vercel.app/theme-minimal","label":"Copyright 2023"}}],"social":[{"icon":"mdi:twitter","link":{"url":"/","label":"Twitter"}},{"icon":"mdi:linkedin","link":{"url":"/","label":"Linkedin"}}]}},"site":"13b918f9-a24f-4be7-a0ca-2103b1084ab1"}],"version":2}